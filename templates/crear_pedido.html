<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Nuevo Pedido</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
</head>

<body class="container mt-4">

<h3><i data-feather="shopping-cart"></i> Nuevo Pedido</h3>

<form method="POST">
  
  <div class="row mb-4">
    <div class="col-md-6">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Informaci√≥n del Pedido</h5>
          
          <div class="mb-3">
            <label class="form-label">Seleccionar Mesa *</label>
            <select class="form-select" name="mesa_id" required>
              <option value="">-- Seleccione una mesa --</option>
              {% for mesa in mesas %}
              <option value="{{ mesa.id }}">Mesa #{{ mesa.numero }} (Capacidad: {{ mesa.capacidad }}) - {{ mesa.estado|title }}</option>
              {% endfor %}
            </select>
            <small class="text-muted">Solo se muestran mesas disponibles</small>
          </div>
          
          <div class="mb-3">
            <label class="form-label">Observaciones (opcional)</label>
            <textarea class="form-control" name="observaciones" rows="3" 
                      placeholder="Notas especiales para la cocina, alergias, etc."></textarea>
          </div>
        </div>
      </div>
    </div>
    
    <div class="col-md-6">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Mesas Disponibles</h5>
          {% if mesas %}
          <div class="list-group">
            {% for mesa in mesas %}
            <div class="list-group-item">
              <div class="d-flex w-100 justify-content-between">
                <h6 class="mb-1">Mesa #{{ mesa.numero }}</h6>
                <small class="text-success">Libre</small>
              </div>
              <p class="mb-1">Capacidad: {{ mesa.capacidad }} personas</p>
            </div>
            {% endfor %}
          </div>
          {% else %}
          <div class="alert alert-warning">
            <i data-feather="alert-circle"></i> No hay mesas disponibles.
            <a href="{{ url_for('mesas') }}" class="alert-link">Gestionar mesas</a>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <div class="d-grid gap-2 d-md-flex justify-content-md-start mt-4">
    <button type="submit" class="btn btn-success">
      <i data-feather="save"></i> Crear Pedido
    </button>
    <a href="{{ url_for('pedidos') }}" class="btn btn-secondary ms-2">
      <i data-feather="arrow-left"></i> Cancelar
    </a>
  </div>

</form>

<script>
feather.replace();
</script>
</body>
</html>